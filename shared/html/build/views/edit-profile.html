<div id="edit-profile" class="mycontact-dialog-box">
    <header>
        {{'EDIT_PROFILE' | translate}}
    </header>
    <nav>
        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="javascript:void(0);#edit-profile-tab">Personal</a></li>
            <li><a data-toggle="tab" href="javascript:void(0);#change-password-tab">{{'CHANGE_PASSWORD' | translate}}</a></li>
        </ul>
    </nav>
    <hr class="dialog-horizontal-bar">
    
    <main class="dialog-content">        

        <div class="tab-content" ng-init="loadUser()">
            <div id="edit-profile-tab" class="tab-pane fade in active mycontact-fields">
                <form name="profileForm" ng-submit="editProfile(profileForm, user)" novalidate>
                    <div class="field-block" >
                        <div  class="field-name">
                            {{'USERNAME'| translate}}:
                        </div>

                        <div class="field-value floatL">
                            <input type="text" ng-model="user.username" readonly/>
                        </div>
                        <div class="clear"></div>
                    </div>

                    <div class="field-block" ng-class="{ 'has-error' : profileForm.fname.$invalid && !profileForm.fname.$pristine }">
                        <div  class="field-name">
                            {{'FIRST_NAME'| translate}}:
                              <span class="text-danger">*</span>
                        </div> 

                        <div class="field-value floatL">
                            <input type="text"
                               ng-model="user.fname"
                               id="fname" 
                               name="fname" 
                               required 
                               ng-maxlength="20"/>
                               <p ng-show="profileForm.fname.$error.required && !profileForm.fname.$pristine" class="help-block">{{'FIRST_NAME_REQUIRED' | translate}}</p>
                                <p ng-show="profileForm.fname.$error.maxlength" class="help-block">{{'FIRST_NAME_MAXLENGTH' | translate}}</p>
                        </div>
                        <div class="clear"></div> 
                    </div>

                    <div class="field-block" ng-class="{ 'has-error' : profileForm.lname.$invalid && !profileForm.lname.$pristine }">
                        <div  class="field-name">
                            {{'LAST_NAME'| translate}}:
                        </div> 

                        <div class="field-value floatL">
                            <input type="text" 
                               ng-model="user.lname" 
                               id="lname" 
                               name="lname" 
                               ng-maxlength="20" />

                            <p ng-show="profileForm.lname.$error.required && !profileForm.lname.$pristine" class="help-block">{{'LAST_NAME_REQUIRED' | translate}}</p>
                            <p ng-show="profileForm.lname.$error.maxlength" class="help-block">{{'LAST_NAME_MAXLENGTH' | translate}}</p>
                        </div>
                        <div class="clear"></div> 
                    </div>

                    <div class="field-block" ng-class="{ 'has-error' : profileForm.email.$invalid && !profileForm.email.$pristine }">
                        <div  class="field-name">
                            {{'EMAIL'| translate}}:
                        </div> 

                        <div class="field-value floatL">
                            <input type="email" name="email" ng-model="user.email" />
                            <p ng-show="profileForm.email.$invalid && !profileForm.email.$pristine" class="help-block">{{'EMAIL_VALID' | translate}}</p>
                        </div>
                        <div class="clear"></div> 
                    </div>

                    <footer>
                        <div class="form-buttons">
                            <button ng-disabled="profileForm.$invalid || profileForm.$pristine" type="submit">{{'BUTTON_SAVE'| translate}}</button>
                            <button type="button" ng-click="closeThisDialog()" class="cancel">{{'CANCEL'| translate}}</button>
                        </div>
                    </footer>
                </form>
            </div>
            <div id="change-password-tab" class="tab-pane fade mycontact-fields">
                <div ng-if="user.is_nas_user!==true">
                    <form name="resetPasswordForm" ng-submit="changePassword(resetPasswordForm, user)" novalidate>
                        <div class="field-block" ng-class="{ 'has-error' : resetPasswordForm.old_password.$invalid && !resetPasswordForm.old_password.$pristine }">
                            <div  class="field-name">
                                {{'OLD_PASSWORD'| translate}}:
                                  <span class="text-danger">*</span>
                            </div>

                            <div class="field-value floatL">
                                <input type="password" name="old_password" id="old_password" ng-model="user.old_password" required />
                                 <p ng-show="resetPasswordForm.old_password.$error.required && !resetPasswordForm.old_password.$pristine" class="help-block"> {{'PASSWORD_REQUIRED' | translate}}</p>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="field-block" ng-class="{ 'has-error' : resetPasswordForm.password.$invalid && !resetPasswordForm.password.$pristine }">
                            <div  class="field-name">
                                {{'ENTER_PASSWORD'| translate}}:
                                  <span class="text-danger">*</span>
                            </div> 

                            <div class="field-value floatL">
                                <input type="password" 
                                    name="password" 
                                    id="password" 
                                    ng-model="user.password" 
                                    ng-pattern="/^[a-zA-Z0-9]*$/" required ng-minlength="3" ng-maxlength="24" />
                                    <p ng-show="resetPasswordForm.password.$error.required && !resetPasswordForm.password.$pristine" class="help-block"> {{'PASSWORD_REQUIRED' | translate}}</p>
                        <p ng-show="resetPasswordForm.password.$error.minlength" class="help-block">{{'PASSWORD_MINLENGTH' | translate}}</p>
                        <p ng-show="resetPasswordForm.password.$error.maxlength" class="help-block">{{'PASSWORD_MAXLENGTH' | translate}}</p>
                        <p ng-show="resetPasswordForm.password.$error.pattern" class="help-block">{{'PASSWORD_PATTERN' | translate}}</p>
                            </div>
                            <div class="clear"></div> 
                        </div>
                        <div class="field-block" ng-class="{ 'has-error' : resetPasswordForm.confirmPassword.$invalid && !resetPasswordForm.confirmPassword.$pristine }">
                            <div  class="field-name">
                                {{'CONFIRM_PASSWORD'| translate}}:
                            </div> 

                            <div class="field-value floatL">
                                <input id="confirmPassword" name="confirmPassword" type="password" ng-model="user.confirmPassword" confirm-password="user.password"  />
                                 <p ng-show="resetPasswordForm.confirmPassword.$error.noMatch" class="help-block"> {{'PASSWORD_CONFIRM' | translate}}</p>
                            </div>
                            <div class="clear"></div> 
                        </div>
                        <footer>
                            <div class="form-buttons">
                                <button ng-disabled="resetPasswordForm.$invalid || resetPasswordForm.$pristine" type="submit">{{'BUTTON_SAVE'| translate}}</button>
                                <button type="button" ng-click="closeThisDialog()" class="cancel">{{'CANCEL'| translate}}</button>
                            </div>
                        </footer>
                    </form>
                </div>
                <div ng-if="user.is_nas_user===true">
                    <center>{{'NAS_USER_CANT_CHANGE_PASSWORD'| translate}}</center>
                </div>
            </div>
        </div>
    </main>
</div>


